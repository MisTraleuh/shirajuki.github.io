<h1 id="html-webstorage">HTML webstorage</h1>
<p>===</p>

<p><code class="highlighter-rouge">sessionStorage</code> lagres i et annet lagringssted for tiden av et “page session” (så langt nettleseren er åpen: inkludert page reload/restore) (dataen slettes etter at nettleseren lukkes)</p>

<p><code class="highlighter-rouge">localStorage</code> gjør de samme, men lagres fortsatt etter at nettleseren lukkes og åpnes (ingen utløpsdato)
Disse lagres dermed som en <code class="highlighter-rouge">object</code></p>

<p>For å sjekke om nettleseren supporter localStorage og sessionStorage, kan vi bruke denne koden her:</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">if</span> <span class="p">(</span><span class="k">typeof</span><span class="p">(</span><span class="nx">Storage</span><span class="p">)</span> <span class="o">!==</span> <span class="s2">"undefined"</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Webstorage support!'</span><span class="p">)</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Ingen Webstorage her!'</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>
<p>Egenskaper og metoder:</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">Storage</span><span class="p">.</span><span class="nx">length</span> <span class="c1">// returnerer en int på antall element i lageren</span>
<span class="nx">Storage</span><span class="p">.</span><span class="nx">key</span><span class="p">(</span><span class="nx">n</span><span class="p">)</span> <span class="c1">// returnerer navnet til n-te index i lageren</span>
<span class="nx">Storage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="nx">kNavn</span><span class="p">)</span> <span class="c1">//returnere value</span>
<span class="nx">Storage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="nx">kNavn</span><span class="p">)</span> <span class="c1">//legger til navn</span>
<span class="nx">Storage</span><span class="p">.</span><span class="nx">removeItem</span><span class="p">(</span><span class="nx">kNavn</span><span class="p">)</span> <span class="c1">//Sletter navn</span>
<span class="nx">Storage</span><span class="p">.</span><span class="nx">clear</span><span class="p">()</span> <span class="c1">//Tømmer alt i storage</span>
</code></pre></div></div>

<h2 id="localstoragesessionstorage-object">localStorage/(sessionStorage) Object</h2>
<hr />
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// 2 metoder som gir samme resultat</span>
<span class="c1">// Lagre</span>
<span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="s2">"fornavn"</span><span class="p">,</span> <span class="s2">"Jonny"</span><span class="p">);</span>
<span class="nx">localStorage</span><span class="p">.</span><span class="nx">fornavn</span> <span class="o">=</span> <span class="s2">"Jonny"</span><span class="p">;</span>
<span class="c1">// Hent</span>
<span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s2">"fornavn"</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">localStorage</span><span class="p">.</span><span class="nx">fornavn</span><span class="p">;</span>

<span class="c1">// Slett</span>
<span class="nx">localStorage</span><span class="p">.</span><span class="nx">removeItem</span><span class="p">(</span><span class="s2">"fornavn"</span><span class="p">);</span>
</code></pre></div></div>

<p>Siden webstorage kan bare lagre verdier i string format, må vi bruke JSON: <code class="highlighter-rouge">JSON.stringify()</code> og <code class="highlighter-rouge">JSON.parse()</code> når vi vil lagre arrays:</p>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">var</span> <span class="nx">navn</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"Jonny"</span><span class="p">];</span>

<span class="nx">localStorage</span><span class="p">.</span><span class="nx">setItem</span><span class="p">(</span><span class="s2">"fornavn"</span><span class="p">,</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">navn</span><span class="p">));</span>
<span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">getItem</span><span class="p">(</span><span class="s2">"fornavn"</span><span class="p">));</span>
<span class="c1">//eller</span>
<span class="nx">localStorage</span><span class="p">.</span><span class="nx">fornavn</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">stringify</span><span class="p">(</span><span class="nx">navn</span><span class="p">);</span>
<span class="kd">var</span> <span class="nx">data</span> <span class="o">=</span> <span class="nx">JSON</span><span class="p">.</span><span class="nx">parse</span><span class="p">(</span><span class="nx">localStorage</span><span class="p">.</span><span class="nx">fornavn</span><span class="p">);</span>
</code></pre></div></div>
